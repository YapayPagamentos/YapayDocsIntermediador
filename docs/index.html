<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Documentação Desenvolvedores - Yapay Pagamentos</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <meta name="description" content="Description">
  <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css">  
  <link rel="stylesheet" href="//unpkg.com/docsify/lib/themes/vue.css">
  <link rel="stylesheet" href="css/style.css">


  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <script src="/js/main.js"></script>

</head>
<body>
  <nav>
    <a href="#/">Intermediador</a>
    <a href="#/zh-cn/">Gateway</a>
  </nav>
  <div id="app"></div>
  <script>
    window.$docsify = {
      ga: 'UA-31834726-7',
      auto2top: true,
      name: 'Intermediador',
      repo: '',
      loadSidebar: true,
      loadNavbar: true,
      subMaxLevel: 2,
      coverpage: false,
      search: {
        noData: {
          '/': 'Sem resultados!'
        },
        paths: 'auto',
        placeholder: {
          '/zh-cn/': '搜索',
          '/': 'Busca'
        }
      },
    }
  </script>
  <script src="//unpkg.com/docsify/lib/docsify.min.js"></script>
  <script src="//unpkg.com/docsify/lib/plugins/ga.min.js"></script>
  <script src="//unpkg.com/docsify/lib/plugins/search.min.js"></script>
  <script src="//unpkg.com/prismjs/components/prism-php.min.js"></script>
  <script src="//unpkg.com/prismjs/components/prism-bash.min.js"></script>

  <!-- Botão de Compra -->
  <script src="https://images.tcdn.com.br/static_inst/tc/tray-cdn/uploads/jquery.maskMoney.js"></script> 
  <script src="/js/highlight.pack.js"></script>        



  <script>
    if (!String.prototype.trim) {
      String.prototype.trim = function () {
        return this.replace(/^[suFEFFxA0]+|[suFEFFxA0]+$/g, '');
      };
    }
    function empty(mixed_var) {
      var undef, key, i, len;
      var emptyValues = [undef, null, false, 0, '', '0'];
      for (i = 0, len = emptyValues.length; i < len; i++) {
        if (mixed_var === emptyValues[i]) {
          return true;
        }
      }
      if (typeof mixed_var === 'object') {
        for (key in mixed_var) {
          return false;
        }
        return true;
      }
      return false;
    }

    document.addEventListener("DOMContentLoaded", function(event) {
      console.log(hljs)
        hljs.configure({tabReplace: '    '});
        hljs.initHighlightingOnLoad();

        jQuery('#generator-product-price').maskMoney();

        jQuery( "#form-generate-button" ).submit(function( event ) {
          var content = '<form id="form_pagamento" name="form_pagamento" method="post" target="blank" action="https://tc.intermediador.yapay.com.br/payment/transaction"> <input type="hidden" name="token_account" id="token_account" value="{TOKEN_ACCOUNT}"> <input type="hidden" name="transaction_product[][description]" id="product_description" value="{PRODUCT_DESCRIPTION}"> <input type="hidden" name="transaction_product[][quantity]" id="product_quantity" value="1"> <input type="hidden" name="transaction_product[][price_unit]" id="product_price" value="{PRODUCT_PRICE}"> <input type="hidden" name="transaction_product[][extra]" id="product_extra" value=""> <input type="image" src="http://integracao.traycheckout.com.br/btncomprar.png" value="Comprar" alt="Comprar" border="0"> </form>';
          var token = jQuery('#generator_token_account').val().trim();
          var product = jQuery('#generator_product_description').val().trim();
          var price = jQuery('#generator-product-price').val().replace('R$','').replace('.', '').replace(',', '.').trim();

          if( ( !empty(token) && token.length >= 5 )  && !empty(product) && !empty(price) ){
          var c = content.replace('{TOKEN_ACCOUNT}', token)
                .replace('{PRODUCT_DESCRIPTION}', product)
                .replace('{PRODUCT_PRICE}', price)
                .replace(/[u00A0-u9999<>&]/gim, function(i) { return '&#'+i.charCodeAt(0)+';'; });
            jQuery('#result-button').html( c );
            jQuery('pre code, .code').each(function(i, block) {
              hljs.highlightBlock(block);
            });

            jQuery('#block-result').fadeIn();
          }
          event.preventDefault();
        });
    });
  </script>
  <!-- Fim Botão de Compra -->


</body>
</html>
